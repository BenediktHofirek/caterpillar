(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(47)},34:function(e,t,a){},38:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),i=a(19),u=(a(34),a(9)),c=a(10),s=a(12),m=a(11),h=a(13),f=a(8),d=a(16),v=a(15),p=a.n(v),b=a(20),y=a(2),g=(a(37),function(e){var t=e.playersColors,a=e.showSettings,n=e.newGame,o=e.levelValue,l=e.changeLevel;return r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("div",{className:"navbar game-nav"},r.a.createElement("div",{className:"players"},r.a.createElement("div",{className:"player-information hero"},r.a.createElement("div",{className:"player-color",style:{backgroundColor:t[0].headColor}}),r.a.createElement("span",{className:"player-name"},"Player")),r.a.createElement("div",{className:"player-information opponent"},r.a.createElement("div",{className:"player-color",style:{backgroundColor:t[1].headColor}}),r.a.createElement("span",{className:"player-name"},"Opponent"))),r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{htmlFor:"levelRange"},"Level: ",o),r.a.createElement("input",{type:"range",name:"levelRange",value:o,onChange:l,className:"custom-range",min:1,max:15,id:"levelRange"})),r.a.createElement("div",{className:"game-buttons"},r.a.createElement("button",{className:"btn m-2 btn-primary button-new-game",onClick:n},"New Game"),r.a.createElement("button",{className:"btn m-2 btn-primary button-settings",onClick:a},"Settings"))))}),C=a(17),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={},a.handleChange=function(e){var t=e.currentTarget,n=t.name,r=t.value;a.setState(Object(C.a)({},n,r))},a.state=Object(d.a)({},e),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.handleSettingsChange,a=this.state,n=a.boardSize,o=(a.playersColors,a.itemColor,a.emptyCellColor,a.itemsToCollectCount);return r.a.createElement("div",{className:"settings"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"boardSize"},"Board Size: ",n),r.a.createElement("input",{type:"range",name:"boardSize",value:n,onChange:this.handleChange,className:"custom-range",min:4,max:40,id:"boardSize"}),r.a.createElement("label",{htmlFor:"itemsToCollectCount"},"Number of items: "),r.a.createElement("select",{onChange:this.handleChange,value:o,name:"itemsToCollectCount",id:"itemsToCollectCount",className:"form-control"},r.a.createElement("option",{key:"1",value:1},"Very small"),r.a.createElement("option",{key:"2",value:2},"Small"),r.a.createElement("option",{key:"3",value:3},"Medium"),r.a.createElement("option",{key:"4",value:4},"Big"),r.a.createElement("option",{key:"5",value:5},"Very big")),r.a.createElement("button",{type:"button",onClick:function(){return t(e.state)},className:"btn btn-primary mt-5"},"Save Changes")))}}]),t}(n.Component),S=function(e){var t=e.boardSize,a=e.boardCells,n=e.playersColors,o=e.itemColor,l=e.emptyCellColor,i=e.onKeyDown;return r.a.createElement("table",{onKeyDown:i,tabIndex:"0",ref:function(e){return e&&e.focus()}},r.a.createElement("tbody",null,function(e,t,a,n,o){for(var l=[],i=0;i<e;i++){for(var u=[],c=0;c<e;c++){var s=i*e+c,m=t[s],h=m.player,f=m.item,d=m.char;u[c]=r.a.createElement("td",{key:c,style:{backgroundColor:E(h,f,a,n,o)}},h?null:d)}l[i]=r.a.createElement("tr",{key:i},u)}return l}(t,a,n,o,l)))};function E(e,t,a,n,r){return e?!0===e.head?a[e.number].headColor:a[e.number].bodyColor:"item"===t?n:r}var M=a(6),k=function(e){var t,a=e.winner,n=e.newGame;if(null===a)return null;var o=M.c,l=o.findIndex(function(e){return e.id===a});switch(a){case 0:t="Congratulation, you won!";break;case 1:t="Unfortunatelly, you lost!";break;case"draw":t="Wow, it's a draw!"}return r.a.createElement("div",{className:"game-over-message-wrapper"},r.a.createElement("div",{style:{backgroundColor:o[l].bgc,color:o[l].c},className:"game-over-message"},r.a.createElement("h3",null,t),r.a.createElement("button",{className:"btn btn-lg m-2 btn-primary button-new-game",onClick:n},"New Game")))};function x(){var e=function(e){for(var t=e.boardSize,a=Math.pow(t,2),n=[],r=0;r<a;r++){n[r]={};do{n[r].char=String.fromCharCode(Math.floor(26*Math.random()+97))}while(n[r].char===(r-1>=0&&n[r-1].char)||n[r].char===(r-2>=0&&n[r-2].char)||n[r].char===(r-t>=0&&n[r-t].char)||n[r].char===(r-t-1>=0&&n[r-t-1].char)||n[r].char===(r-2*t>=0&&n[r-2*t].char)||n[r].char===(r-t+1>=0&&(r+1)%t&&n[r-t+1].char))}return n}(this.state);return function(e,t){for(var a=e.itemsToCollectCount,n=e.boardSize,r=a/10*Math.pow(n,2),o=Math.pow(n,2),l=r/o*100,i=0;i<o;i++){var u=Math.floor(100*Math.random())<l;t[i].item=u?"item":null}var c=0;for(;c<2;){var s=Math.floor(Math.random()*o);t[s].player||(t[s].player={number:c,head:!0,foot:!0},t[s].item=null,c++)}return t}(this.state,e)}var N=a(7);function O(e,t,a){var n=e[t].char,r=e[a].player.number;if(e[t].player)return e;if("item"===e[t].item)return e[a].player.head=!1,e[a].player.nextElement=t,e[t]={char:n,item:null,player:{number:r,head:!0,foot:!1}},e;var o=e.findIndex(function(e){return e.player&&e.player.number===r&&!0===e.player.foot});return e[a].player.head=!1,e[a].player.nextElement=t,e[t]={char:n,item:null,player:{number:r,head:!0,foot:!1}},e[e[o].player.nextElement].player.foot=!0,e[o].item=null,e[o].player=null,e}function j(e,t,a){for(var n=Number(e),r=Number(t),o=r*r,l=[],i=0,u=[n-r>=0&&n-r,n-1>=0&&n%r!==0&&n-1,n+1<o&&(n+1)%r!==0&&n+1,n+r<o&&n+r];i<u.length;i++){var c=u[i];"number"!==typeof c||a[c].player||l.push(c)}return l}function T(e,t,a){var n=Math.floor(t/a),r=Math.floor(e/a);return Math.abs(n-r)+Math.abs(t%a-e%a)}function R(){var e=this,t=this.state,a=t.boardCells,n=t.boardSize,r=t.calcDepthForNextMove,o=t.badMoves,l=Object(N.a)(a),i=a.findIndex(function(e){return e.player&&!0===e.player.head&&1===e.player.number}),u=function(e,t,a,n,r){var o=j(e,a,t);if(1===o.length)return o[0];if(0===o.length)return null;var l=[];if(r&&0!==r.length){var i=!0,u=!1,c=void 0;try{for(var s,m=function(){var e=s.value;-1===r.findIndex(function(t){return t===e})&&l.push(e)},h=o[Symbol.iterator]();!(i=(s=h.next()).done);i=!0)m()}catch(le){u=!0,c=le}finally{try{i||null==h.return||h.return()}finally{if(u)throw c}}}else l.push.apply(l,Object(N.a)(o));if(!n){Math.round(Math.random())&&l.reverse();for(var f=0,d=l;f<d.length;f++){var v=d[f];if("item"===t[v].item)return v}for(var p=[],b=0,y=l;b<y.length;b++){var g=y[b];p.push([g])}for(var C=0,w=[];C<5;){for(var S=0;S<p.length;S++)if(1e5!==p[S]){var E=[],M=!0,k=!1,x=void 0;try{for(var O,R=p[S][Symbol.iterator]();!(M=(O=R.next()).done);M=!0){var z=O.value;E.push(z)}}catch(le){k=!0,x=le}finally{try{M||null==R.return||R.return()}finally{if(k)throw x}}for(var I=[],B=0,L=E;B<L.length;B++){var G=j(L[B],a,t),D=!0,F=!1,H=void 0;try{for(var W,V=function(){var e=W.value;if(I.find(function(t){return t===e}))return"continue";I.push(e)},K=G[Symbol.iterator]();!(D=(W=K.next()).done);D=!0)V()}catch(le){F=!0,H=le}finally{try{D||null==K.return||K.return()}finally{if(F)throw H}}}E.length=0;for(var U=function(){var e=J[A];if(w.find(function(t){return t===e}))return"continue";w.push(e),p[S].push(e)},A=0,J=I;A<J.length;A++)U();if(I.length=0,0!==p[S].length){var P=!0,$=!1,q=void 0;try{for(var Q,X=p[S][Symbol.iterator]();!(P=(Q=X.next()).done);P=!0)if(t[Q.value].item)return l[S]}catch(le){$=!0,q=le}finally{try{P||null==X.return||X.return()}finally{if($)throw q}}}else p[S].push(1e5)}C++}}for(var Y=[],Z=0;Z<t.length;Z++)t[Z].item&&Y.push(Z);if(0===Y.length)return null;var _=Y.map(function(t){return T(t,e,a)}),ee=Math.min.apply(Math,Object(N.a)(_)),te=Y[_.findIndex(function(e){return e===ee})],ae=l.map(function(e){return T(e,te,a)}),ne=Math.min.apply(Math,Object(N.a)(ae)),re=ae.findIndex(function(e){return e===ne}),oe=ne>5&&n?n-1:ne-5-1;return{targetIndex:l[re],calcDepthForNextMove:n?n-1:oe}}(i,a,n,r,o);if("object"!==typeof u||null===u){if(null!==u){var c=O(l,u,i);this.setState({boardCells:c,computerRunning:0})}else{var s=this.state,m=s.computerLevel,h=1e3*(5-s.computerLevelRange[m-1]);setTimeout(function(){return e.setState({computerRunning:0})},h)}}else{var f=u.targetIndex,d=u.calcDepthForNextMove,v=O(l,f,i);this.setState({boardCells:v,computerRunning:0,calcDepthForNextMove:d})}}function z(e,t,a,n,r){for(var o=0,l=[e],i=[e];o<n;){for(var u=[],c=0,s=l;c<s.length;c++){var m=j(s[c],a,t),h=!0,f=!1,d=void 0;try{for(var v,p=function(){var e=v.value;if(u.find(function(t){return t===e}))return"continue";u.push(e)},b=m[Symbol.iterator]();!(h=(v=b.next()).done);h=!0)p()}catch(w){f=!0,d=w}finally{try{h||null==b.return||b.return()}finally{if(f)throw d}}}l.length=0;for(var y=function(){var e=C[g];if(i.find(function(t){return t===e}))return"continue";i.push(e),l.push(e)},g=0,C=u;g<C.length;g++)y();if(0===l.length)return o;o++}return 1e3}var I=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={boardSize:14,itemsToCollectCount:3,playersColors:[{headColor:M.f,bodyColor:M.e},{headColor:M.h,bodyColor:M.g}],showSettings:!1,itemColor:M.d,emptyCellColor:M.b,gameHasStarted:!1,computerRunning:0,computerLevel:5,computerLevelRange:M.a,winner:null},e.handleBadMoves=function(){var t=e.findBadMoves();t!==e.state.badMoves&&e.setState({badMoves:t})},e.makeComputerMove=function(){var t=e.state,a=t.computerLevel,n=t.computerLevelRange[a-1],r=Math.round(Math.random())?-1:1,o=Math.ceil(1e3*(n+Math.random()*(n/2)*r)),l=setTimeout(e.handleComputerMove,o);e.setState({computerTimeoutRef:l})},e.stopGame=function(){var t=e.state.computerTimeoutRef;t&&clearTimeout(t),e.setState({computerRunning:0,gameHasStarted:!1,winner:null})},e.handleNewGame=function(){e.stopGame(),e.makeNewBoard()},e.proofItemsCount=function(e){return e.filter(function(e){return"item"===e.item}).length},e.makeNewBoard=Object(b.a)(p.a.mark(function t(){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.boardSetup(),!e.proofItemsCount(a)){t.next=4;break}return t.abrupt("break",6);case 4:t.next=0;break;case 6:return t.next=8,e.setState({boardCells:a});case 8:case"end":return t.stop()}},t)})),e.handleLevelChange=function(t){var a=t.currentTarget;e.setState({computerLevel:a.value})},e.handleShowSettings=function(){e.stopGame(),e.setState({showSettings:!0})},e.handleSettingsChange=function(){var t=Object(b.a)(p.a.mark(function t(a){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(d.a)({},a));case 2:e.makeNewBoard(),e.setState({showSettings:!1});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.boardSetup=x.bind(Object(y.a)(Object(y.a)(e))),e.handleHumanMove=function(e){var t=e.key,a=this.state,n=a.boardCells,r=a.boardSize;a.gameHasStarted||this.setState({gameHasStarted:!0});var o=n.findIndex(function(e){return e.player&&!0===e.player.head&&0===e.player.number}),l=j(o,r,n),i=[],u=!0,c=!1,s=void 0;try{for(var m,h=l[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var f=m.value;!1===f||n[f].player||i.push(n[f])}}catch(y){c=!0,s=y}finally{try{u||null==h.return||h.return()}finally{if(c)throw s}}var d=i.findIndex(function(e){return e.char===t});if(-1!==d){var v=i[d],p=n.indexOf(v),b=O(Object(N.a)(n),p,o);this.setState({boardCells:b,gameHasStarted:1})}}.bind(Object(y.a)(Object(y.a)(e))),e.handleComputerMove=R.bind(Object(y.a)(Object(y.a)(e))),e.findWinner=function(){var e=this.state.boardCells,t=0,a=0,n=0,r=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;c.item?t++:c.player&&(0===c.player.number?a++:n++)}}catch(s){o=!0,l=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return Math.max(a,n)>Math.min(a,n)+t?a>n?0:1:0===t&&a===n?"draw":null}.bind(Object(y.a)(Object(y.a)(e))),e.findBadMoves=function(){for(var e=this.state,t=e.boardSize,a=e.boardCells,n=t,r=[],o=j(a.findIndex(function(e){return e.player&&!0===e.player.head&&1===e.player.number}),t,a),l=0;l<o.length;l++){var i=z(o[l],a,t,n);r.push(i)}var u=[];if(r.find(function(e){return 1e3===e}))for(var c=0;c<o.length;c++)1e3!==r[c]&&u.push(o[c]);else for(var s=Math.max.apply(Math,r),m=0;m<o.length;m++)r[m]!==s&&u.push(o[m]);return u}.bind(Object(y.a)(Object(y.a)(e))),e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=this.state.badMoves===t.badMoves,n=this.state.computerTimeoutRef===t.computerTimeoutRef;return a&&n}},{key:"componentWillMount",value:function(){this.state.boardCells||this.makeNewBoard()}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.computerTimeoutRef,a=e.computerRunning,n=e.gameHasStarted;if(null===e.winner){var r=this.findWinner();null!==r?(clearTimeout(t),this.setState({winner:r})):!a&&n&&(this.setState({computerRunning:1}),this.handleBadMoves(),this.makeComputerMove())}}},{key:"render",value:function(){var e=this.state,t=e.showSettings,a=e.boardCells,n=e.boardSize,o=e.playersColors,l=e.itemColor,i=e.emptyCellColor,u=e.computerLevel,c=e.itemsToCollectCount,s=e.winner;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{playersColors:o,settings:this.handleSettings,newGame:this.handleNewGame,levelValue:u,changeLevel:this.handleLevelChange,showSettings:this.handleShowSettings}),r.a.createElement(k,{winner:s,newGame:this.handleNewGame}),t&&r.a.createElement(w,{handleSettingsChange:this.handleSettingsChange,boardSize:n,emptyCellColor:i,itemColor:l,itemsToCollectCount:c,playersColors:o})||r.a.createElement(S,{boardCells:a,boardSize:n,playersColors:o,itemColor:l,emptyCellColor:i,onKeyDown:this.handleHumanMove}))}}]),t}(n.Component),B=(a(38),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={client:"ca-pub-1157366739872118"},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.state.client;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.c,null,r.a.createElement(f.a,null)),r.a.createElement("header",null,r.a.createElement("h1",null,"Caterpillar")),r.a.createElement("div",{className:"caterpillar-game"},r.a.createElement(I,null)),r.a.createElement("footer",null,"\xa9 2019 Benedikt Hofirek. All rights reserved."))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},6:function(e){e.exports={e:"#1a8cff",g:"#e6ac00",f:"#004d99",h:"#996600",d:"green",b:"white",c:[{id:0,bgc:"rgba(0, 179, 0, 0.8)",c:"#004d00"},{id:1,bgc:"rgba(255, 128, 128, 0.8)",c:"#b30000"},{id:"draw",bgc:"rgba(255, 153, 51, 0.8)",c:"#663300"}],a:[5,4,3.5,3,2.5,2,1.5,1.2,1,.8,.6,.4,.3,.2,.1]}}},[[29,1,2]]]);
//# sourceMappingURL=main.64388308.chunk.js.map